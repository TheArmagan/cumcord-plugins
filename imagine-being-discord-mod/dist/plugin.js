(function(p,f,h,m){"use strict";function c(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach(function(t){if(t!=="default"){var o=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,o.get?o:{enumerable:!0,get:function(){return e[t]}})}}),r.default=e,Object.freeze(r)}var u=y(p),a=c(f),_=c(h),g=c(m);class b{constructor(){this.patches=[]}add(...r){this.patches.push(...r)}remove(r){let[t]=this.patches.splice(this.patches.indexOf(o=>o==r),1);t()}removeAll(){let r=this.patches.splice(0,this.patches.length);for(let t=0;t<r.length;t++)r[t]()}}var i=new b;const d=a.default.findByDisplayName("Menu",!1),v=a.default.findByProps("getLastSelectedGuildId"),l=g.default.FluxDispatcher,{getCurrentUser:D}=a.default.findByProps("getCurrentUser"),M=a.default.findByProps("getGuild");async function S(){let e=a.default.findByDisplayName("PrivacyAndSafetyShield"),r=_.default.before("default",d,function([t]){if(t?.navId=="guild-header-popout"&&!t?.children?.some(o=>o?.props?.children?.some?.(n=>n?.props?.id=="settings"))&&!t?.children?.some(o=>o?.props?.id=="becomeMod")){let o=v.getLastSelectedGuildId();t.children.push(u.createElement(d.MenuSeparator,null),u.createElement(d.MenuItem,{id:"becomeMod",label:"Become Mod",icon:e,action:()=>{let n=M.getGuild(o),s={type:"GUILD_MEMBER_UPDATE",guildId:o,roles:Object.keys(n.roles),user:D()};l.dispatch(s),setTimeout(()=>{l.dispatch({type:"VIEW_AS_ROLES_UPDATE",guildId:o,roles:[],options:{}}),setTimeout(()=>l.dispatch(s),10)},10)}}))}});i.add(r)}var E={onLoad(){S()},onUnload(){i.removeAll()}};return E})(cumcord.modules.common.React,cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common);
