(function(p,f,h,m){"use strict";function o(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach(function(t){if(t!=="default"){var a=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,a.get?a:{enumerable:!0,get:function(){return e[t]}})}}),r.default=e,Object.freeze(r)}var n=y(p),d=o(f),_=o(h),g=o(m);class v{constructor(){this.patches=[]}add(...r){this.patches.push(...r)}remove(r){let[t]=this.patches.splice(this.patches.indexOf(a=>a==r),1);t()}removeAll(){let r=this.patches.splice(0,this.patches.length);for(let t=0;t<r.length;t++)r[t]()}}var u=new v;const c=d.default.findByDisplayName("Menu",!1),D=d.default.findByProps("getLastSelectedGuildId"),i=g.default.FluxDispatcher,{getCurrentUser:b}=d.default.findByProps("getCurrentUser"),M=d.default.findByProps("getGuild");async function S(){let e=d.default.findByDisplayName("PrivacyAndSafetyShield"),r=_.default.before("default",c,function([t]){if(t?.navId=="guild-header-popout"&&!t?.children?.some(a=>a?.props?.children?.some?.(l=>l?.props?.id=="settings"))&&!t?.children?.some(a=>a?.props?.id=="becomeMod")){let a=D.getLastSelectedGuildId();t.children.push(n.createElement(c.MenuSeparator,null),n.createElement(c.MenuItem,{id:"becomeMod",label:"Become Mod",icon:e,action:()=>{let l=M.getGuild(a),s={type:"GUILD_MEMBER_UPDATE",guildId:l,roles:l.roles,user:b()};i.dirtyDispatch(s),setTimeout(()=>{i.dirtyDispatch({type:"VIEW_AS_ROLES_UPDATE",guildId:a,roles:[],options:{}}),setTimeout(()=>i.dirtyDispatch(s),10)},10)}}))}});u.add(r)}var E={onLoad(){S()},onUnload(){u.removeAll()}};return E})(cumcord.modules.common.React,cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common);
