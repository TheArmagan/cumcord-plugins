(function(p,f,h,m){"use strict";function d(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function y(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach(function(t){if(t!=="default"){var a=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,a.get?a:{enumerable:!0,get:function(){return e[t]}})}}),r.default=e,Object.freeze(r)}var n=y(p),c=d(f),_=d(h),g=d(m);class b{constructor(){this.patches=[]}add(...r){this.patches.push(...r)}remove(r){let[t]=this.patches.splice(this.patches.indexOf(a=>a==r),1);t()}removeAll(){let r=this.patches.splice(0,this.patches.length);for(let t=0;t<r.length;t++)r[t]()}}var u=new b;const l=c.default.findByDisplayName("Menu",!1),v=c.default.findByProps("getLastSelectedGuildId"),o=g.default.FluxDispatcher,{getCurrentUser:D}=c.default.findByProps("getCurrentUser"),M=c.default.findByProps("getGuild");async function S(){let e=c.default.findByDisplayName("PrivacyAndSafetyShield"),r=_.default.before("default",l,function([t]){if(t?.navId=="guild-header-popout"&&!t?.children?.some(a=>a?.props?.children?.some?.(i=>i?.props?.id=="settings"))&&!t?.children?.some(a=>a?.props?.id=="becomeMod")){let a=v.getLastSelectedGuildId();t.children.push(n.createElement(l.MenuSeparator,null),n.createElement(l.MenuItem,{id:"becomeMod",label:"Become Mod",icon:e,action:()=>{let i=M.getGuild(a),s={type:"GUILD_MEMBER_UPDATE",guildId:a,roles:Object.keys(i.roles),user:D()};o.dirtyDispatch(s),setTimeout(()=>{o.dirtyDispatch({type:"VIEW_AS_ROLES_UPDATE",guildId:a,roles:[],options:{}}),setTimeout(()=>o.dirtyDispatch(s),10)},10)}}))}});u.add(r)}var E={onLoad(){S()},onUnload(){u.removeAll()}};return E})(cumcord.modules.common.React,cumcord.modules.webpack,cumcord.patcher,cumcord.modules.common);
